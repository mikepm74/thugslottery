{"code":"(this[\"webpackJsonp50-50\"]=this[\"webpackJsonp50-50\"]||[]).push([[0],{64:function(e,t,n){},65:function(e,t,n){},78:function(e,t,n){\"use strict\";n.r(t);var r=n(7),c=n(2),s=n(24),a=n.n(s),o=(n(64),n(65),n(57)),i=n(29),b=n(92);function j(e){var t=e.ticketsNormalized,n=Object(c.useState)([]),s=Object(i.a)(n,2),a=s[0],j=s[1],l=Object(c.useState)(\"GOOD LUCK G!!!\"),d=Object(i.a)(l,2),h=d[0],u=d[1],O=Object(c.useState)(0),x=Object(i.a)(O,2),m=x[0],g=x[1],p=Object(c.useState)([]),f=Object(i.a)(p,2),v=f[0],k=f[1];Object(c.useEffect)((function(){var e=[];Object.keys(t).map((function(n){for(var r=t[n],c=1;c<=r;c++)e.push(n)})),e.sort((function(){return Math.random()-.5})),k(e),g(e.length)}),[t]);return Object(r.jsxs)(\"center\",{children:[Object(r.jsx)(\"br\",{}),\" \",Object(r.jsx)(\"br\",{}),Object(r.jsx)(\"table\",{width:\"420px\",style:{backgroundColor:\"rgba(255,255,255,0.7)\",border:\"1px solid black\"},children:Object(r.jsx)(\"tbody\",{children:Object(r.jsx)(\"tr\",{children:Object(r.jsx)(\"td\",{align:\"center\",children:Object(r.jsx)(\"h1\",{children:h})})})})}),Object(r.jsx)(\"br\",{}),Object(r.jsx)(b.a,{variant:\"contained\",color:\"primary\",onClick:function(){g(v.length);var e=Math.floor(Math.random()*Math.floor(m));console.log(e);var t=v[e];u(t),j([].concat(Object(o.a)(a),[t])),v.splice(e,1)},children:a.length>0?\"DRAW WINNER\":\"START \"}),Object(r.jsx)(\"br\",{}),Object(r.jsxs)(\"div\",{children:[Object(r.jsx)(\"br\",{}),Object(r.jsxs)(\"table\",{width:\"480x\",style:{backgroundColor:\"rgba(255,255,255,0.7)\",border:\"1px solid black\"},children:[Object(r.jsx)(\"thead\",{children:Object(r.jsx)(\"tr\",{children:Object(r.jsx)(\"td\",{align:\"center\",children:\"WINNERS\"})})}),Object(r.jsx)(\"tbody\",{children:Object.values(a).map((function(e,t){return Object(r.jsx)(\"tr\",{children:Object(r.jsxs)(\"td\",{align:\"center\",children:[t+1,\" \",e]})},e+t)}))})]}),Object(r.jsx)(\"br\",{})]})]})}var l=n(20);var d=function(){var e={},t=Object(l.useQuery)(Object(l.gql)('{\\n  ethereum(network: bsc) {\\n    transfers(options: {offset: 0}, amount: {gt: 0}, receiver: {is: \"0x93E8A4cd2c98B0667BF2AD9C46f7660F390dF348\"}, currency: {is: \"0x339550404ca4d831d12b1b2e4768869997390010\"}) {\\n      block {\\n        height\\n      }\\n      address: sender {\\n        address\\n        annotation\\n      }\\n      currency {\\n        address\\n        symbol\\n      }\\n      amount\\n      transaction {\\n        hash\\n      }\\n      external\\n    }\\n  }\\n}\\n')),n=t.loading,c=t.error,s=t.data;return n?\"Loading tx list...\":c?\"Error! \".concat(c.message):(s.ethereum.transfers.map((function(t){return e[t.address.address]=Math.floor(t.amount)})),Object(r.jsx)(\"div\",{className:\"App\",style:{backgroundImage:\"url(https://miro.medium.com/max/1225/1*TCs1_KP3xoZIC2P0c_Owlw.png)\",backgroundSize:\"cover\",width:\"100vw\",height:\"100vh\"},children:n?null:Object(r.jsx)(j,{ticketsNormalized:e})}))},h=Object(l.createHttpLink)({uri:\"https://graphql.bitquery.io\"}),u=new l.ApolloClient({link:h,cache:new l.InMemoryCache});a.a.render(Object(r.jsx)(l.ApolloProvider,{client:u,children:Object(r.jsx)(d,{})}),document.getElementById(\"root\"))}},[[78,1,2]]]);","name":"static/js/main.d5157f96.chunk.js","map":{"version":3,"sources":["static/js/main.d5157f96.chunk.js"],"names":["this","push","64","module","exports","__webpack_require__","65","78","__webpack_exports__","r","jsx_runtime","react","react_dom","react_dom_default","n","toConsumableArray","slicedToArray","Button","RaffleForm","_ref","ticketsNormalized","_useState","Object","_useState2","winningAddresses","setWinningAddresses","_useState3","_useState4","winner","setWinner","_useState5","_useState6","totalTickets","setTotalTickets","_useState7","_useState8","ticketsArray","setTicketsArray","list","keys","map","address","amount","i","sort","Math","random","length","children","width","style","backgroundColor","border","align","variant","color","onClick","rand","floor","console","log","winningAddress","concat","splice","values","client","src_App","_useQuery","loading","error","data","message","ethereum","transfers","tx","className","backgroundImage","backgroundSize","height","httpLink","uri","src_client","link","cache","a","render","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonp50-50\"] = this[\"webpackJsonp50-50\"] || []).push([[0],{\n\n/***/ 64:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 65:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 78:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(24);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(64);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(65);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(57);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(29);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Button/Button.js + 83 modules\nvar Button = __webpack_require__(92);\n\n// CONCATENATED MODULE: ./src/components/RaffleForm.jsx\nfunction RaffleForm(_ref){var ticketsNormalized=_ref.ticketsNormalized;var _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),winningAddresses=_useState2[0],setWinningAddresses=_useState2[1];var _useState3=Object(react[\"useState\"])(\"GOOD LUCK G!!!\"),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),winner=_useState4[0],setWinner=_useState4[1];var _useState5=Object(react[\"useState\"])(0),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),totalTickets=_useState6[0],setTotalTickets=_useState6[1];var _useState7=Object(react[\"useState\"])([]),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),ticketsArray=_useState8[0],setTicketsArray=_useState8[1];// a little more random\nfunction shuffle(array){array.sort(function(){return Math.random()-0.5;});}// load tickets\nObject(react[\"useEffect\"])(function(){var list=[];var setList=function setList(){Object.keys(ticketsNormalized).map(function(address){var amount=ticketsNormalized[address];for(var i=1;i<=amount;i++){list.push(address);}});};setList();shuffle(list);setTicketsArray(list);setTotalTickets(list.length);},[ticketsNormalized]);var handleSubmit=function handleSubmit(){setTotalTickets(ticketsArray.length);var rand=Math.floor(Math.random()*Math.floor(totalTickets));console.log(rand);// set winner and substract 1 ticket\nvar winningAddress=ticketsArray[rand];setWinner(winningAddress);setWinningAddresses([].concat(Object(toConsumableArray[\"a\" /* default */])(winningAddresses),[winningAddress]));ticketsArray.splice(rand,1);};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"center\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"table\",{width:\"420px\",style:{backgroundColor:\"rgba(255,255,255,0.7)\",border:\"1px solid black\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"tbody\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"tr\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{align:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:winner})})})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"contained\",color:\"primary\",onClick:handleSubmit,children:winningAddresses.length>0?\"DRAW WINNER\":\"START \"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"table\",{width:\"480x\",style:{backgroundColor:\"rgba(255,255,255,0.7)\",border:\"1px solid black\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"thead\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"tr\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{align:\"center\",children:\"WINNERS\"})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"tbody\",{children:Object.values(winningAddresses).map(function(address,i){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"tr\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"td\",{align:\"center\",children:[i+1,\" \",address]})},address+i);})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{})]})]});}\n// EXTERNAL MODULE: ./node_modules/@apollo/client/index.js\nvar client = __webpack_require__(20);\n\n// CONCATENATED MODULE: ./src/utils/links.js\nvar addressTokenTranfers=function addressTokenTranfers(address){return\"https://api.bscscan.com/api?module=account&action=tokentx&address=\"+address+\"&startblock=0&endblock=999999999&sort=asc\";};var contestAddress=\"0x93E8A4cd2c98B0667BF2AD9C46f7660F390dF348\";var drugsContract=\"0x339550404ca4d831d12b1b2e4768869997390010\";var links_BITQUERY_INFLOW=function BITQUERY_INFLOW(address,tokenContract){var string=\"{\\n  ethereum(network: bsc) {\\n    transfers(options: {offset: 0}, amount: {gt: 0}, receiver: {is: \\\"0x93E8A4cd2c98B0667BF2AD9C46f7660F390dF348\\\"}, currency: {is: \\\"0x339550404ca4d831d12b1b2e4768869997390010\\\"}) {\\n      block {\\n        height\\n      }\\n      address: sender {\\n        address\\n        annotation\\n      }\\n      currency {\\n        address\\n        symbol\\n      }\\n      amount\\n      transaction {\\n        hash\\n      }\\n      external\\n    }\\n  }\\n}\\n\";return Object(client[\"gql\"])(string);};\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){var divStyle={backgroundImage:\"url(https://miro.medium.com/max/1225/1*TCs1_KP3xoZIC2P0c_Owlw.png)\",backgroundSize:\"cover\",width:\"100vw\",height:\"100vh\"};var ticketsNormalized={};var _useQuery=Object(client[\"useQuery\"])(links_BITQUERY_INFLOW(contestAddress,drugsContract)),loading=_useQuery.loading,error=_useQuery.error,data=_useQuery.data;if(loading)return\"Loading tx list...\";if(error)return\"Error! \".concat(error.message);// format winner entries for beefy pickWinner\ndata.ethereum.transfers.map(function(tx){return ticketsNormalized[tx.address.address]=Math.floor(tx.amount);});return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",style:divStyle,children:!loading?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RaffleForm,{ticketsNormalized:ticketsNormalized}):null});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\n// 1\n// 2\nvar httpLink=Object(client[\"createHttpLink\"])({uri:\"https://graphql.bitquery.io\"});// 3\nvar src_client=new client[\"ApolloClient\"]({link:httpLink,cache:new client[\"InMemoryCache\"]()});// 4\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(client[\"ApolloProvider\"],{client:src_client,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById(\"root\"));\n\n/***/ })\n\n},[[78,1,2]]]);","inputSourceMap":{"version":3,"sources":["/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/node_modules/postcss-loader/src/index.js??postcss!/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/src/index.css","/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/node_modules/postcss-loader/src/index.js??postcss!/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/src/App.css","/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/src/components/RaffleForm.jsx","/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/src/utils/links.js","/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/src/App.js","/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/src/index.js"],"names":["RaffleForm","ticketsNormalized","useState","winningAddresses","setWinningAddresses","winner","setWinner","totalTickets","setTotalTickets","ticketsArray","setTicketsArray","shuffle","array","sort","Math","random","useEffect","list","setList","Object","keys","map","address","amount","i","push","length","handleSubmit","rand","floor","console","log","winningAddress","splice","backgroundColor","border","values","addressTokenTranfers","contestAddress","drugsContract","BITQUERY_INFLOW","tokenContract","string","gql","App","divStyle","backgroundImage","backgroundSize","width","height","useQuery","loading","error","data","message","ethereum","transfers","tx","httpLink","createHttpLink","uri","client","ApolloClient","link","cache","InMemoryCache","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import React, { useState, useEffect } from \"react\";\nimport Button from \"@material-ui/core/Button\";\n\nexport default function RaffleForm({ ticketsNormalized }) {\n  const [winningAddresses, setWinningAddresses] = useState([]);\n  const [winner, setWinner] = useState(\"GOOD LUCK G!!!\");\n  const [totalTickets, setTotalTickets] = useState(0);\n  const [ticketsArray, setTicketsArray] = useState([]);\n\n  // a little more random\n  function shuffle(array) {\n    array.sort(() => Math.random() - 0.5);\n  }\n  // load tickets\n  useEffect(() => {\n    const list = [];\n    const setList = () => {\n      Object.keys(ticketsNormalized).map((address) => {\n        const amount = ticketsNormalized[address];\n        for (let i = 1; i <= amount; i++) {\n          list.push(address);\n        }\n      });\n    };\n    setList();\n    shuffle(list);\n    setTicketsArray(list);\n    setTotalTickets(list.length);\n  }, [ticketsNormalized]);\n\n  const handleSubmit = () => {\n    setTotalTickets(ticketsArray.length);\n    const rand = Math.floor(Math.random() * Math.floor(totalTickets));\n    console.log(rand);\n    // set winner and substract 1 ticket\n    const winningAddress = ticketsArray[rand];\n    setWinner(winningAddress);\n    setWinningAddresses([...winningAddresses, winningAddress]);\n    ticketsArray.splice(rand, 1);\n  };\n\n  return (\n    <center>\n      <br /> <br />\n      <table\n        width=\"420px\"\n        style={{\n          backgroundColor: \"rgba(255,255,255,0.7)\",\n          border: \"1px solid black\",\n        }}\n      >\n        <tbody>\n          <tr>\n            <td align=\"center\">\n              <h1>{winner}</h1>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <br />\n      <Button variant=\"contained\" color=\"primary\" onClick={handleSubmit}>\n        {winningAddresses.length > 0 ? \"DRAW WINNER\" : \"START \"}\n      </Button>\n      <br />\n      <div>\n        <br />\n        <table\n          width=\"480x\"\n          style={{\n            backgroundColor: \"rgba(255,255,255,0.7)\",\n            border: \"1px solid black\",\n          }}\n        >\n          <thead>\n            <tr>\n              <td align=\"center\">WINNERS</td>\n            </tr>\n          </thead>\n          <tbody>\n            {Object.values(winningAddresses).map((address, i) => {\n              return (\n                <tr key={address + i}>\n                  <td align=\"center\">\n                    {i + 1} {address}\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n        <br />\n      </div>\n    </center>\n  );\n}\n","import { gql } from \"@apollo/client\";\n\nexport const addressTokenTranfers = (address) =>\n  \"https://api.bscscan.com/api?module=account&action=tokentx&address=\" +\n  address +\n  \"&startblock=0&endblock=999999999&sort=asc\";\n\nexport const contestAddress = \"0x93E8A4cd2c98B0667BF2AD9C46f7660F390dF348\";\nexport const drugsContract = \"0x339550404ca4d831d12b1b2e4768869997390010\";\n\nexport const BITQUERY_INFLOW = (address, tokenContract) => {\n  let string = `{\n  ethereum(network: bsc) {\n    transfers(options: {offset: 0}, amount: {gt: 0}, receiver: {is: \"0x93E8A4cd2c98B0667BF2AD9C46f7660F390dF348\"}, currency: {is: \"0x339550404ca4d831d12b1b2e4768869997390010\"}) {\n      block {\n        height\n      }\n      address: sender {\n        address\n        annotation\n      }\n      currency {\n        address\n        symbol\n      }\n      amount\n      transaction {\n        hash\n      }\n      external\n    }\n  }\n}\n`;\n  return gql(string);\n};\n","import \"./App.css\";\nimport RaffleForm from \"./components/RaffleForm\";\nimport { useQuery } from \"@apollo/client\";\nimport { BITQUERY_INFLOW } from \"./utils/links\";\nimport { drugsContract, contestAddress } from \"./utils/links\";\n\nfunction App() {\n  const divStyle = {\n    backgroundImage: `url(https://miro.medium.com/max/1225/1*TCs1_KP3xoZIC2P0c_Owlw.png)`,\n    backgroundSize: \"cover\",\n    width: \"100vw\",\n    height: \"100vh\",\n  };\n  const ticketsNormalized = {};\n  const { loading, error, data } = useQuery(\n    BITQUERY_INFLOW(contestAddress, drugsContract)\n  );\n\n  if (loading) return \"Loading tx list...\";\n  if (error) return `Error! ${error.message}`;\n\n  // format winner entries for beefy pickWinner\n  data.ethereum.transfers.map(\n    (tx) => (ticketsNormalized[tx.address.address] = Math.floor(tx.amount))\n  );\n\n  return (\n    <div className=\"App\" style={divStyle}>\n      {!loading ? (\n        <RaffleForm ticketsNormalized={ticketsNormalized}></RaffleForm>\n      ) : null}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n// 1\nimport {\n  ApolloProvider,\n  ApolloClient,\n  createHttpLink,\n  InMemoryCache,\n} from \"@apollo/client\";\n\n// 2\nconst httpLink = createHttpLink({\n  uri: \"https://graphql.bitquery.io\",\n});\n\n// 3\nconst client = new ApolloClient({\n  link: httpLink,\n  cache: new InMemoryCache(),\n});\n\n// 4\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <App />\n  </ApolloProvider>,\n  document.getElementById(\"root\")\n);\n"]}}