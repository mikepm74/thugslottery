{"ast":null,"code":"import _toConsumableArray from\"/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import Button from\"@material-ui/core/Button\";export default function RaffleForm(_ref){var ticketsNormalized=_ref.ticketsNormalized;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),winningAddresses=_useState2[0],setWinningAddresses=_useState2[1];var _useState3=useState(\"GOOD LUCK G!!!\"),_useState4=_slicedToArray(_useState3,2),winner=_useState4[0],setWinner=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalTickets=_useState6[0],setTotalTickets=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),ticketsArray=_useState8[0],setTicketsArray=_useState8[1];var winnerStyle={//backgroundColor: \"darkblue\",\ncolor:\"white\"};function shuffle(array){array.sort(function(){return Math.random()-0.5;});}// load tickets\nuseEffect(function(){var list=[];var setList=function setList(){Object.keys(ticketsNormalized).map(function(address){var amount=ticketsNormalized[address];for(var i=1;i<=amount;i++){list.push(address);}});};setList();shuffle(list);setTicketsArray(list);setTotalTickets(list.length);},[ticketsNormalized]);var handleSubmit=function handleSubmit(){setTotalTickets(ticketsArray.length);var rand=Math.floor(Math.random()*Math.floor(totalTickets));console.log(rand);// set winner and substract 1 ticket\nvar winningAddress=ticketsArray[rand];setWinner(winningAddress);setWinningAddresses([].concat(_toConsumableArray(winningAddresses),[winningAddress]));ticketsArray.splice(rand,1);};return/*#__PURE__*/_jsxs(\"center\",{children:[/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"table\",{width:\"420px\",style:{backgroundColor:\"rgba(255,255,255,0.7)\",border:\"1px solid black\"},children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{align:\"center\",children:/*#__PURE__*/_jsx(\"h1\",{children:winner})})})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleSubmit,children:winningAddresses.length>0?\"DRAW WINNER\":\"START \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"table\",{width:\"480x\",style:{backgroundColor:\"rgba(255,255,255,0.7)\",border:\"1px solid black\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{align:\"center\",children:\"LUCKY FEW\"})})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.values(winningAddresses).map(function(address,i){return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{align:\"center\",children:[i+1,\" \",address]})},address+i);})})]}),/*#__PURE__*/_jsx(\"br\",{})]})]});}","map":{"version":3,"sources":["/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/src/components/RaffleForm.jsx"],"names":["React","useState","useEffect","Button","RaffleForm","ticketsNormalized","winningAddresses","setWinningAddresses","winner","setWinner","totalTickets","setTotalTickets","ticketsArray","setTicketsArray","winnerStyle","color","shuffle","array","sort","Math","random","list","setList","Object","keys","map","address","amount","i","push","length","handleSubmit","rand","floor","console","log","winningAddress","splice","backgroundColor","border","values"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Button from \"@material-ui/core/Button\";\n\nexport default function RaffleForm({ ticketsNormalized }) {\n  const [winningAddresses, setWinningAddresses] = useState([]);\n  const [winner, setWinner] = useState(\"GOOD LUCK G!!!\");\n  const [totalTickets, setTotalTickets] = useState(0);\n  const [ticketsArray, setTicketsArray] = useState([]);\n  const winnerStyle = {\n    //backgroundColor: \"darkblue\",\n    color: \"white\",\n  };\n\n  function shuffle(array) {\n    array.sort(() => Math.random() - 0.5);\n  }\n  // load tickets\n  useEffect(() => {\n    const list = [];\n    const setList = () => {\n      Object.keys(ticketsNormalized).map((address) => {\n        const amount = ticketsNormalized[address];\n        for (let i = 1; i <= amount; i++) {\n          list.push(address);\n        }\n      });\n    };\n    setList();\n    shuffle(list);\n    setTicketsArray(list);\n    setTotalTickets(list.length);\n  }, [ticketsNormalized]);\n\n  const handleSubmit = () => {\n    setTotalTickets(ticketsArray.length);\n    const rand = Math.floor(Math.random() * Math.floor(totalTickets));\n    console.log(rand);\n    // set winner and substract 1 ticket\n    const winningAddress = ticketsArray[rand];\n    setWinner(winningAddress);\n    setWinningAddresses([...winningAddresses, winningAddress]);\n    ticketsArray.splice(rand, 1);\n  };\n\n  return (\n    <center>\n      <br /> <br />\n      <table\n        width=\"420px\"\n        style={{\n          backgroundColor: \"rgba(255,255,255,0.7)\",\n          border: \"1px solid black\",\n        }}\n      >\n        <tbody>\n          <tr>\n            <td align=\"center\">\n              <h1>{winner}</h1>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <br />\n      <Button variant=\"contained\" color=\"primary\" onClick={handleSubmit}>\n        {winningAddresses.length > 0 ? \"DRAW WINNER\" : \"START \"}\n      </Button>\n      <br />\n      <div>\n        <br />\n        <table\n          width=\"480x\"\n          style={{\n            backgroundColor: \"rgba(255,255,255,0.7)\",\n            border: \"1px solid black\",\n          }}\n        >\n          <thead>\n            <tr>\n              <td align=\"center\">LUCKY FEW</td>\n            </tr>\n          </thead>\n          <tbody>\n            {Object.values(winningAddresses).map((address, i) => {\n              return (\n                <tr key={address + i}>\n                  <td align=\"center\">\n                    {i + 1} {address}\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n        <br />\n      </div>\n    </center>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}