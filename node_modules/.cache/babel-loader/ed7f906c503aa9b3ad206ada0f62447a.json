{"ast":null,"code":"export default function winners(ticketList, blockhash) {\n  const crypto = require(\"crypto\");\n\n  const seedrandom = require(\"seedrandom\");\n\n  const rng = seedrandom(crypto.createHash(\"sha256\").update().digest(\"hex\"));\n}\n\nconst getTotalTickets = tickets => Object.values(tickets).reduce((a, b) => a + b);\n\nconst pickWinner = (tickets, rng) => {\n  const totalTickets = getTotalTickets(tickets);\n  const winningTicket = Math.floor(rng() * totalTickets);\n  let ticketsCounted = 0;\n\n  for (const key in tickets) {\n    ticketsCounted += tickets[key];\n    if (ticketsCounted >= winningTicket) return key;\n  }\n}; // Thugs Finance - (5 Prizes) + 1 NFT\n\n\nconsole.log(\"Selecting Thugs Finance Winners\");\n\nfor (let i = 1; i <= 5; i++) {\n  console.log(`Thugs winner ${i} ${pickWinner(drugsTickets, rng)}`);\n}\n\nconsole.log(\"Thugs NFT\", pickWinner(drugsTickets, rng));\nconsole.log(\"---\");","map":{"version":3,"sources":["/home/ok/Nextcloud/code/THUGS/50-50-app/50-50/src/utils/pickWinners.js"],"names":["winners","ticketList","blockhash","crypto","require","seedrandom","rng","createHash","update","digest","getTotalTickets","tickets","Object","values","reduce","a","b","pickWinner","totalTickets","winningTicket","Math","floor","ticketsCounted","key","console","log","i","drugsTickets"],"mappings":"AACA,eAAe,SAASA,OAAT,CAAiBC,UAAjB,EAA6BC,SAA7B,EAAwC;AACrD,QAAMC,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,QAAMC,UAAU,GAAGD,OAAO,CAAC,YAAD,CAA1B;;AACA,QAAME,GAAG,GAAGD,UAAU,CACpBF,MAAM,CAACI,UAAP,CAAkB,QAAlB,EAA4BC,MAA5B,GAAqCC,MAArC,CAA4C,KAA5C,CADoB,CAAtB;AAID;;AAED,MAAMC,eAAe,GAAIC,OAAD,IACtBC,MAAM,CAACC,MAAP,CAAcF,OAAd,EAAuBG,MAAvB,CAA8B,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAA5C,CADF;;AAGA,MAAMC,UAAU,GAAG,CAACN,OAAD,EAAUL,GAAV,KAAkB;AACnC,QAAMY,YAAY,GAAGR,eAAe,CAACC,OAAD,CAApC;AACA,QAAMQ,aAAa,GAAGC,IAAI,CAACC,KAAL,CAAWf,GAAG,KAAKY,YAAnB,CAAtB;AAEA,MAAII,cAAc,GAAG,CAArB;;AAEA,OAAK,MAAMC,GAAX,IAAkBZ,OAAlB,EAA2B;AACzBW,IAAAA,cAAc,IAAIX,OAAO,CAACY,GAAD,CAAzB;AACA,QAAID,cAAc,IAAIH,aAAtB,EAAqC,OAAOI,GAAP;AACtC;AACF,CAVD,C,CAYA;;;AACAC,OAAO,CAACC,GAAR,CAAY,iCAAZ;;AACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,CAArB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3BF,EAAAA,OAAO,CAACC,GAAR,CAAa,gBAAeC,CAAE,IAAGT,UAAU,CAACU,YAAD,EAAerB,GAAf,CAAoB,EAA/D;AACD;;AACDkB,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBR,UAAU,CAACU,YAAD,EAAerB,GAAf,CAAnC;AACAkB,OAAO,CAACC,GAAR,CAAY,KAAZ","sourcesContent":["\nexport default function winners(ticketList, blockhash) {\n  const crypto = require(\"crypto\");\n  const seedrandom = require(\"seedrandom\");\n  const rng = seedrandom(\n    crypto.createHash(\"sha256\").update().digest(\"hex\")\n  );\n\n}\n\nconst getTotalTickets = (tickets) =>\n  Object.values(tickets).reduce((a, b) => a + b);\n\nconst pickWinner = (tickets, rng) => {\n  const totalTickets = getTotalTickets(tickets);\n  const winningTicket = Math.floor(rng() * totalTickets);\n\n  let ticketsCounted = 0;\n\n  for (const key in tickets) {\n    ticketsCounted += tickets[key];\n    if (ticketsCounted >= winningTicket) return key;\n  }\n};\n\n// Thugs Finance - (5 Prizes) + 1 NFT\nconsole.log(\"Selecting Thugs Finance Winners\");\nfor (let i = 1; i <= 5; i++) {\n  console.log(`Thugs winner ${i} ${pickWinner(drugsTickets, rng)}`);\n}\nconsole.log(\"Thugs NFT\", pickWinner(drugsTickets, rng));\nconsole.log(\"---\");\n"]},"metadata":{},"sourceType":"module"}